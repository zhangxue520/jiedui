package kcsj;

import java.io.BufferedReader;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.IOException;
import java.util.ArrayList;
import java.util.List;

import people.Admin;
import people.Student;
import people.Teacher;
import people.User;



public class Kcsj {
	List<String> list=new ArrayList<String>();
	BufferedReader br;
	public boolean login(String name,int password){
		boolean flag=false;
		try {
			br=new BufferedReader(new FileReader(new File(".t/Message.txt")));
			String str=null;
			while((str=br.readLine())!=null){
				if (!"".equals(str)) {
					list.add(str);
				}
			}
//			System.out.println(name+"-"+password);
//			System.out.println(list);
			br.close();
		
			
		} catch (FileNotFoundException e) {
			e.printStackTrace();
		} catch (IOException e) {
			e.printStackTrace();
		}
		for (String str1 : list) {
//			System.out.println(str1+"   "+name+"           "+password);
			if (str1.contains(name)&&str1.contains(password+"")) {
				flag=true;
				break;
				
			}else{
				flag=false;
			}
		}
		return flag;
	}
	
	public User geInformation(String name,int password){
		int count=0;
		String info = null;
		for (String str : list) {
			
			if (str.indexOf(name+"-"+password)!=-1) {
				info=list.get(count);
			}else{
				count++;
			}
		}
		String[]s=info.split("-");
		if (s.length==6) {
			Admin a=new Admin();
			a.setId(Integer.parseInt(s[0]));
			a.setName(s[1]);
			a.setPassWord(Integer.parseInt(s[2]));
			a.setAge(Integer.parseInt(s[3]));
			a.setAd_id(Integer.parseInt(s[4]));
			a.setLimit(s[5]);
			return a;
		}else if  (s.length==8) {
			Teacher t=new Teacher();
			t.setId(Integer.parseInt(s[0]));
			t.setName(s[1]);
			t.setPassWord(Integer.parseInt(s[2]));
			t.setAge(Integer.parseInt(s[3]));
			t.setGender((s[4]));
			t.setlend(Integer.parseInt(s[5]));
			t.setReturn(Integer.parseInt(s[6]));
			t.setLevel(s[7]);
			return t;
		}else   {
			Student stu=new Student();
			stu.setId(Integer.parseInt(s[0]));
			stu.setName(s[1]);
			stu.setPassWord(Integer.parseInt(s[2]));
			stu.setAge(Integer.parseInt(s[3]));
			stu.setGender((s[4]));
			stu.setlend(Integer.parseInt(s[5]));
			stu.setReturn(Integer.parseInt(s[6]));
			stu.getAdress();
			stu.getlclass();
			return stu;
		}
	}
}
